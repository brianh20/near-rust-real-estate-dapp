{"version":3,"sources":["chain/index.js","components/loader/loader.js","components/header/index.js","components/new/index.js","components/row/index.js","components/list/index.js","app/index.js","index.js","utils/utils.js","config.js"],"names":["getData","nearConfig","currentUser","viewMethodOnContract","allData","map","value","JSON","parse","id","ownData","data","reverse","secret","visible","includes","owned","owner","price","parseFloat","console","log","postSecret","walletConnection","title","content","account","functionCall","contractId","contractName","methodName","args","gas","DEFAULT_FUNCTION_CALL_GAS","attachedDeposit","walletMeta","walletCallbackUrl","functionCallResult","transaction","hash","getSecretContent","secretData","buySecretContent","_key","String","Math","round","defaultProps","sentences","loaderType","loaderSize","color","textStyles","fontSize","fontWeight","height","wrapperBackgroundColor","counter","counterMax","counterDelay","counterChars","counterStyles","fadeIn","startFadeOut","SimpleDark","props","className","Header","signIn","signOut","onClick","NewSecret","useState","setTitle","setContent","handlers","error","setError","addSecret","nearPrice","isNaN","handleChange","e","target","name","type","onChange","min","step","Row","item","view","buy","SecretList","dix","App","showLoader","setShowLoader","setData","useEffect","refreshData","walletSignIn","requestSignIn","postNewSecret","alert","viewSecret","el","buySecret","window","location","reload","getConfig","process","NEAR_ENV","keyStore","nearAPI","BrowserLocalStorageKeyStore","near","getAccountId","initSecretSafe","then","ReactDOM","render","document","getElementById","BN","method","params","paramBytes","Buffer","from","base58Params","bs58","encode","provider","JsonRpcProvider","nodeUrl","query","rawResult","result","x","fromCharCode","join","CONTRACT_NAME","module","exports","env","networkId","walletUrl","helperUrl","keyPath","HOME","masterAccount","Error"],"mappings":"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","file":"static/js/main.5410301b.chunk.js","sourcesContent":["import { viewMethodOnContract, DEFAULT_FUNCTION_CALL_GAS } from '../utils/utils';\n\nexport const signIn = (nearConfig, walletConnection) => {\n  walletConnection.requestSignIn(\n    nearConfig.contractName,\n    '', // title. Optional, by the way\n    '', // successUrl. Optional, by the way\n    '', // failureUrl. Optional, by the way\n  );\n};\n\nexport const signOut = (walletConnection) => {\n  walletConnection.signOut();\n  window.location.reload();\n};\n\nexport const getData = async (nearConfig, currentUser) => {\n  const allData = (await viewMethodOnContract(nearConfig, 'get_secrets', '{}')).map(value => JSON.parse(value));\n  const ownData = currentUser && (await viewMethodOnContract(nearConfig, 'get_secrets_by_asker', `{\"asker\": \"${currentUser}\"}`)).map(value => JSON.parse(value).id) || []\n  let data = [];\n\n  if (allData) {\n    data = allData\n      .reverse()\n      .map(secret => ({\n        ...secret,\n        visible: ownData.includes(secret.id),\n        owned: secret.owner === currentUser,\n        price: parseFloat(secret.price / 100000)\n      }));\n    return data\n  } else {\n    console.log(\"Oof, there aren't any secrets.\");\n  }\n  return data;\n}\n\nexport const postSecret = async (nearConfig, walletConnection, { title, content, price }) => {\n  try {\n    let functionCallResult = await walletConnection.account().functionCall({\n      contractId: nearConfig.contractName,\n      methodName: 'store_secret',\n      args: { title, content, price },\n      gas: DEFAULT_FUNCTION_CALL_GAS, // optional param, by the way\n      attachedDeposit: 0,\n      walletMeta: '', // optional param, by the way\n      walletCallbackUrl: '' // optional param, by the way\n    });\n    if (functionCallResult && functionCallResult.transaction && functionCallResult.transaction.hash) {\n      console.log('Transaction hash for explorer', functionCallResult.transaction.hash)\n    }\n  } catch (e) {\n    console.log('Something went wrong!', e);\n  } finally {\n    return true;\n  }\n}\n\nexport const getSecretContent = async (nearConfig, currentUser, id) => {\n  const secretData = (await viewMethodOnContract(nearConfig, 'get_secret_by_asker_by_id', `{\"asker\": \"${currentUser}\", \"_key\":\"${id}\"}`));\n  if (secretData) {\n    return secretData\n  } else {\n    console.log(\"Oof, looks like you don't have access.\");\n  }\n}\n\nexport const buySecretContent = async (nearConfig, walletConnection, id, price) => {\n  try {\n    let functionCallResult = await walletConnection.account().functionCall({\n      contractId: nearConfig.contractName,\n      methodName: 'buy_secret',\n      args: { _key: String(id) },\n      gas: DEFAULT_FUNCTION_CALL_GAS, // optional param, by the way\n      attachedDeposit: `${Math.round(price * 100000)}0000000000000000000`,\n      walletMeta: '', // optional param, by the way\n      walletCallbackUrl: '' // optional param, by the way\n    });\n    if (functionCallResult && functionCallResult.transaction && functionCallResult.transaction.hash) {\n      console.log('Transaction hash for explorer', functionCallResult.transaction.hash)\n    }\n  } catch (e) {\n    console.log('Something went wrong!', e);\n  } finally {\n    return true;\n  }\n}\n","import React from 'react'\nimport ExampleComponent from 'react-fullpage-custom-loader'\n\nconst defaultProps = {\n  sentences: [\n    'Transaction processingâ€¦',\n  ],\n  loaderType: 'fire', // a nice one\n  loaderSize: 'big', // small, medium or big?\n  color: '#f2f2f2', // your default color for the loader\n  textStyles: { // Any CSS style!\n    fontSize: 19,\n    fontWeight: 'bold',\n    height: '6em',\n    color: '#f2f2f2'\n  },\n  wrapperBackgroundColor: 'linear-gradient(to bottom, #f2f2f2 0%, #111111 100%)', // any valid CSS background string works (gradients here!)\n  counter: false, // We are going to show the counter below the text\n  counterMax: 5, // Stop after 5 cycles\n  counterDelay: 3000, // A cycle length in milliseconds\n  counterChars: null, // if no chars are passed you get to see the counter number\n  counterStyles: {\n    color: 'white'\n  }, // any text style to modify the counter\n  fadeIn: true, // controlled on top level\n  startFadeOut: false // controlled on top level\n}\n\nconst SimpleDark = (props) => {\n  return (\n    <div className=\"wrapper\">\n      <header className=\"site-header\">\n      </header>\n      <main className=\"main-area\">\n        <ExampleComponent\n          {...defaultProps}\n          {...props}\n        />\n      </main>\n    </div>\n  )\n}\n\nexport default SimpleDark\n","\nimport './style.css';\nimport React from 'react';\n\nconst Header = ({ signIn, signOut, currentUser }) => {\n  return (\n    <div id=\"user\">\n      {currentUser ? <div>\n        <span>{currentUser}</span>\n        <button onClick={signOut}>Sign out</button></div> : <button onClick={signIn}>Log in</button>}\n    </div>\n  );\n}\n\nexport default Header;\n","\nimport './style.css';\nimport React, { useState } from 'react';\n\nconst NewSecret = ({ postSecret }) => {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [price, setPrice] = useState('');\n  const handlers = {\n    title: setTitle,\n    content: setContent,\n    price: setPrice\n  };\n  const [error, setError] = useState('');\n\n  const addSecret = async () => {\n    const nearPrice = Math.round(price * 100000);\n    if (title && content && nearPrice && !isNaN(nearPrice)) {\n      setError(\"\");\n      postSecret({ title, content, price: nearPrice })\n    } else {\n      setError(\"At least one of the fields is incorrect\");\n    }\n  }\n\n  const handleChange = (e) => {\n    handlers[e.target.name](e.target.value);\n  }\n\n  return (\n    <div id=\"new-secret\">\n      <div className=\"field\"><span>Title:</span><input type=\"text\" name=\"title\" onChange={handleChange} /></div>\n      <div className=\"field\"><span>Content:</span><input type=\"text\" name=\"content\" onChange={handleChange} /></div>\n      <div className=\"field\"><span>Price (N):</span><input type=\"number\" min=\"0\" step=\"0.00001\" name=\"price\" onChange={handleChange} /></div>\n      <div id=\"submit\">\n        <div>\n          <span className=\"important\">{error}</span>\n        </div>\n        <button onClick={addSecret}>Add Secret</button>\n      </div>\n    </div>\n  );\n}\n\nexport default NewSecret;\n","\nimport './style.css';\nimport React from 'react';\n\nconst Row = ({ item, view, buy }) => {\n  return (\n    <div className=\"itemContainer\">\n      <div className=\"item\">\n        <div className=\"id\">\n          {item.id}\n        </div>\n        <div className=\"title\">\n          <span>{item.title}</span>{item.owned && <span className=\"important\">OWN</span>}\n        </div>\n        {!item.visible && <div className=\"price\">\n          <b>{item.price}</b> N\n        </div>}\n        <div className={`action ${item.visible ? 'view' : 'buy'}`} onClick={() => item.visible ? view(item.id) : buy(item.id, item.price)}>\n          {item.visible ? \"VIEW\" : \"BUY\"}\n        </div>\n      </div>\n      {item.content && <div className=\"itemContent\">{item.content}</div>}\n    </div >\n\n  );\n}\nexport default Row;","\nimport './style.css';\nimport React from 'react';\nimport Row from '../row';\n\nconst SecretList = ({ data, view, buy }) => {\n  return (\n    <div id=\"list\">\n      {data && data.map && data.map((secret, dix) => {\n        return (<Row item={secret} key={`secret-${dix}`} dix={dix} view={view} buy={buy} />)\n      })}\n    </div >\n  );\n}\n\nexport default SecretList;","import './style.css';\nimport React, { useEffect, useState } from 'react';\n\nimport {\n  signIn,\n  signOut,\n  getData,\n  postSecret,\n  getSecretContent,\n  buySecretContent\n} from '../chain';\n\nimport Loader from '../components/loader/loader';\nimport Header from '../components/header';\nimport NewSecret from '../components/new';\nimport SecretList from '../components/list';\n\n\nconst App = ({ nearConfig, walletConnection, currentUser }) => {\n  const [showLoader, setShowLoader] = useState(false);\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    refreshData()\n  }, []);\n\n  const refreshData = async () => {\n    setShowLoader(true)\n    setData(await getData(nearConfig, currentUser))\n    setShowLoader(false)\n  }\n\n  const walletSignIn = () => {\n    signIn(nearConfig, walletConnection);\n  }\n\n  const walletSignOut = () => {\n    signOut(walletConnection);\n  }\n\n  const postNewSecret = async ({ title, content, price }) => {\n    setShowLoader(true)\n    try {\n      await postSecret(nearConfig, walletConnection, { title, content, price });\n    } catch (e) {\n      alert(e);\n    } finally {\n      setShowLoader(false)\n      refreshData();\n    }\n  }\n\n  const viewSecret = async (id) => {\n    const content = await getSecretContent(nearConfig, currentUser, id);\n    setData([...data].map(el => el.id === id ? { ...el, content } : el));\n  }\n\n  const buySecret = async (id, price) => {\n    if (currentUser) {\n      setShowLoader(true)\n      await buySecretContent(nearConfig, walletConnection, id, price);\n      await refreshData();\n      setShowLoader(false)\n    } else {\n      walletSignIn();\n    }\n  }\n\n  if (showLoader) {\n    return (<Loader />)\n  }\n\n  return (\n    <div id=\"page\">\n      <Header signIn={walletSignIn} signOut={walletSignOut} currentUser={currentUser} />\n      <h1>NEAR Secret Safe</h1>\n      {currentUser && <NewSecret postSecret={postNewSecret} />}\n      <SecretList data={data} view={viewSecret} buy={buySecret} />\n    </div >\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as nearAPI from 'near-api-js';\nimport App from './app';\nimport getConfig from './config.js';\n\nasync function initSecretSafe() {\n  const nearConfig = getConfig(process.env.NEAR_ENV || 'testnet');\n\n  // create a keyStore for signing transactions using the user's key\n  // which is located in the browser local storage after user logs in\n  const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n\n  // Initializing connection to the NEAR testnet\n  const near = await nearAPI.connect({ keyStore, ...nearConfig });\n\n  // Initialize wallet connection\n  const walletConnection = new nearAPI.WalletConnection(near);\n\n  // Load in user's account data\n  let currentUser;\n  if (walletConnection.getAccountId()) {\n    currentUser = walletConnection.getAccountId();\n  }\n\n  return { nearConfig, walletConnection, currentUser };\n}\n\ninitSecretSafe()\n  .then(({ nearConfig, walletConnection, currentUser }) => {\n    ReactDOM.render(\n      <App\n        nearConfig={nearConfig}\n        walletConnection={walletConnection}\n        currentUser={currentUser}\n      />,\n      document.getElementById('root'));\n  });\n\n","import * as nearAPI from 'near-api-js';\nimport bs58 from 'bs58';\nimport BN from 'bn.js';\n\nexport const DEFAULT_FUNCTION_CALL_GAS = new BN('30000000000000');\n\nexport async function viewMethodOnContract(nearConfig, method, params) {\n  const paramBytes = Buffer.from(params, 'utf8');\n  const base58Params = bs58.encode(paramBytes);\n\n  const provider = new nearAPI.providers.JsonRpcProvider(nearConfig.nodeUrl);\n  const rawResult = await provider.query(`call/${nearConfig.contractName}/${method}`, base58Params);\n  return JSON.parse(rawResult.result.map((x) => String.fromCharCode(x)).join(''));\n}","const CONTRACT_NAME = process.env.CONTRACT_NAME || 'ss-6.testnet';\n\nfunction getConfig(env) {\n  switch(env) {\n    case 'production':\n    case 'mainnet':\n      return {\n        networkId: 'mainnet',\n        nodeUrl: 'https://rpc.mainnet.near.org',\n        contractName: CONTRACT_NAME,\n        walletUrl: 'https://wallet.near.org',\n        helperUrl: 'https://helper.mainnet.near.org'\n      };\n    case 'development':\n    case 'testnet':\n      return {\n        networkId: 'testnet',\n        nodeUrl: 'https://rpc.testnet.near.org',\n        contractName: CONTRACT_NAME,\n        walletUrl: 'https://wallet.testnet.near.org',\n        helperUrl: 'https://helper.testnet.near.org'\n      };\n    case 'betanet':\n      return {\n        networkId: 'betanet',\n        nodeUrl: 'https://rpc.betanet.near.org',\n        contractName: CONTRACT_NAME,\n        walletUrl: 'https://wallet.betanet.near.org',\n        helperUrl: 'https://helper.betanet.near.org'\n      };\n    case 'local':\n      return {\n        networkId: 'local',\n        nodeUrl: 'http://localhost:3030',\n        keyPath: `${process.env.HOME}/.near/validator_key.json`,\n        walletUrl: 'http://localhost:4000/wallet',\n        contractName: CONTRACT_NAME\n      };\n    case 'test':\n    case 'ci':\n      return {\n        networkId: 'shared-test',\n        nodeUrl: 'https://rpc.ci-testnet.near.org',\n        contractName: CONTRACT_NAME,\n        masterAccount: 'test.near'\n      };\n    case 'ci-betanet':\n      return {\n        networkId: 'shared-test-staging',\n        nodeUrl: 'https://rpc.ci-betanet.near.org',\n        contractName: CONTRACT_NAME,\n        masterAccount: 'test.near'\n      };\n    default:\n      throw Error(`Unconfigured environment '${env}'. Can be configured in src/config.js.`);\n  }\n}\n\nmodule.exports = getConfig;\n"],"sourceRoot":""}